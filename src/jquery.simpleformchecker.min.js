/**
 *	@author Ioulian Alexeev
 *	@date 08.11.2011
 *	@description Fast and versatile form checker script.
 *	@version 0.1.8
 */
function Sfc(){"use strict";var a={Email:{Class:"email",ErrorText:"This must be a valid email address",Pattern:new RegExp(/^(("[\w-\s]+")|([\w\-]+(?:\.[\w\-]+)*)|("[\w\-\s]+")([\w\-]+(?:\.[\w\-]+)*))(@((?:[\w\-]+\.)*\w[\w\-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i)},Url:{Class:"url",ErrorText:"This must be a valid url",Pattern:new RegExp(/(^|\s)((https?:\/\/)?[\w\-]+(\.[\w\-]+)+\.?(:\d+)?(\/\S*)?)/i)},Ip:{Class:"ip",ErrorText:"This must be a valid IP number",Pattern:new RegExp(/^((?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))*$/i)},Number:{Class:"number",ErrorText:"This must contain only numbers",Pattern:new RegExp(/^[0-9]*$/i)},Characters:{Class:"characters",ErrorText:"This must contain only characters",Pattern:new RegExp(/^[a-zA-Z]*$/i)},Day:{Class:"day",ErrorText:"This must be a valid day",Pattern:new RegExp(/^([1-9]|[1-2][0-9]|3[01])$/i)},Month:{Class:"month",ErrorText:"This must be a valid month",Pattern:new RegExp(/^(([0]{0,1}[1-9])|(1[0-2]))$/i)},Year:{Class:"year",ErrorText:"This must be a valid year",Pattern:new RegExp(/^(19|20)\d\d$/i)},Date:{Class:"date",ErrorText:"This must be a valid date (DD/MM/YYYY)",Pattern:new RegExp(/^((0?[1-9]|[12][0-9]|3[01])[\- \/.](0?[1-9]|1[012])[\- \/.](19|20)?[0-9]{2})*$/i)},UsDate:{Class:"usdate",ErrorText:"This must be a valid date (MM/DD/YYYY)",Pattern:new RegExp(/^((0?[1-9]|1[012])[\- \/.](0?[1-9]|[12][0-9]|3[01])[\- \/.](19|20)?[0-9]{2})*$/i)},MysqlDate:{Class:"mysqldate",ErrorText:"This must be a valid date (YYYY-MM-DD)",Pattern:new RegExp(/^((19|20)?[0-9]{2}[\-](0?[1-9]|1[012])[\-](0?[1-9]|[12][0-9]|3[01]))*$/i)}},b={Length:{Class:"length",MinErrorText:"The minimum required number of characters is [[allowed]]",MaxErrorText:"The maximum allowed number of characters is [[allowed]]",EqualErrorText:"The number of characters must be [[allowed]]",CounterTextMax:"[[current]] <= [[max]]",CounterTextMin:"[[current]] >= [[min]]",CounterTextMinMax:"[[min]] <= [[current]] <= [[max]]",CounterTextEqual:"[[current]] == [[equal]]"},Identical:{Class:"identical",ErrorText:"These fields must match"},PasswordStrength:{Class:"strength",ErrorText:"Your password is too weak",Notifications:["Very weak","Weak","Better","Medium","Strong","Strongest"]}},c={asterix:'<span class="asterix">*</span>',errorMessage:'<p class="errorMessage">[[text]]</p>',requiredClass:"required",checkOnChange:true,updateOnType:true,scrollToErrorField:true,animationTime:250,scrollTime:500,emptyErrorText:"This field is required",formErrorText:"Please check the highlighted fields"},d=this,e=null,f=null,g=false,h=["input","select","textarea"];Sfc.prototype.construct=function(a,b){f=a;d.handleOptions(b);d.init()};this.init=function(){var a,e=h.length;for(a=0;a<e;a+=1){$(f).find(h[a]).each(function(){if(c.asterix!==""){if($(this).hasClass(c.requiredClass)){$(this).parent(":first").append(c.asterix)}}if(c.checkOnChange){$(this).bind("change",function(){d.checkField($(this))})}if(h[a]==="input"){if(c.updateOnType){if($(this).hasClass(b.Length.Class)){$(this).bind("keyup",function(){d.validateFieldLength($(this),true)});d.validateFieldLength($(this),true)}if($(this).hasClass(b.PasswordStrength.Class)){$(this).bind("keyup",function(){d.checkPasswordStrength($(this),true)})}}}})}$(f).submit(function(){return d.checkForm()})};this.handleOptions=function(d){var e,f;if(d!==null){for(e in d){if(c[e]!==null){c[e]=d[e]}}}if(d.errorText!==null){for(f in d.errorText){if(a[f]!==null){a[f].ErrorText=d.errorText[f]}}for(f in d.errorText){if(b[f]!==null){b[f].ErrorText=d.errorText[f]}}}};this.checkForm=function(){var a,b,e=h.length;g=false;for(a=0;a<e;a+=1){$(f).find(h[a]).each(function(){d.checkField($(this))})}if(g){if(c.scrollToErrorField){d.scrollToErrorField()}b=$(f).data("errmessage");if(typeof b!=="undefined"){$("#"+b).text(c.formErrorText)}return false}return true};this.scrollToErrorField=function(){$("html, body").animate({scrollTop:e.offset().top},c.scrollTime);e.focus()};this.checkField=function(b){var e,f=false;if(!f&&b.hasClass("required")&&b.val()===""){f=d.addError(b,c.emptyErrorText)}else if(!f&&d.validateFieldLength(b)){f=true}else if(!f&&d.validateIdentical(b)){f=true}else if(!f&&d.checkPasswordStrength(b)){f=true}if(!f){if(a!==null){for(e in a){if(b.hasClass(a[e].Class)&&!a[e].Pattern.test(b.val())&&b.val()!==""){f=d.addError(b,a[e].ErrorText)}}}}if(!f){d.removeError(b)}};this.checkPasswordStrength=function(a,c){var e=0,f=false,g=$(a).val(),h=$("#"+$(a).data("desc")),i=$(a).data("minstrength");c=typeof c==="undefined"?false:c;if(g.length>6){e+=1}if(g.match(/[a-z]/)&&g.match(/[A-Z]/)){e+=1}if(g.match(/\d+/)){e+=1}if(g.match(/\.[!,@,#,$,%,\^,&,*,?,_,~,-,(,)]/)){e+=1}if(g.length>12){e+=1}if(h.length===1){$(h).text(b.PasswordStrength.Notifications[e]).removeClass().addClass("strength"+e)}if(typeof i!=="undefined"&&!c){if(e<i){f=d.addError(a,b.PasswordStrength.ErrorText)}}return f};this.validateIdentical=function(a){var c,e=false,f=$(a).data("equalto");if(typeof f!=="undefined"){c=$("#"+f);if(c.length===1){if($(c).val()!==$(a).val()){e=d.addError(a,b.Identical.ErrorText);d.addError(c,b.Identical.ErrorText)}else{d.removeError(c)}}}return e};this.validateFieldLength=function(a,c){c=typeof c==="undefined"?false:c;var e=false,f="",g="",h=$(a).data("max"),i=$(a).data("min");if(a.hasClass(b.Length.Class)&&(a.attr("type")==="text"||a.attr("type")==="password")){if(typeof h!=="undefined"&&typeof i==="undefined"){f=b.Length.CounterTextMax;g="maxchars"}else if(typeof i!=="undefined"&&typeof h==="undefined"){f=b.Length.CounterTextMin;g="minchars"}else if(typeof h!=="undefined"&&typeof i!=="undefined"){if(i>=0){if(h>i){f=b.Length.CounterTextMinMax;g="bothchars"}else if(h===i){f=b.Length.CounterTextEqual;g="equalchars"}}}if(!e&&(g==="maxchars"||g==="bothchars")&&a.val().length>h){e=!c?d.addError(a,b.Length.MaxErrorText.replace("[[allowed]]",h)):true}else if(!e&&(g==="minchars"||g==="bothchars")&&a.val().length<i){e=!c?d.addError(a,b.Length.MinErrorText.replace("[[allowed]]",i)):true}else if(!e&&g==="equalchars"&&a.val().length!==h){e=!c?d.addError(a,b.Length.EqualErrorText.replace("[[allowed]]",h)):true}d.updateCounter(a,f,h,i,e)}return e};this.updateCounter=function(a,b,c,d,e){var f=$("#"+$(a).data("counter"));if(f.length===1){d=typeof d==="undefined"?"":d;c=typeof c==="undefined"?"":c;$(f).text(b.replace("[[min]]",d).replace("[[current]]",$(a).val().length).replace("[[max]]",c).replace("[[equal]]",c));if(e){$(f).addClass("error")}else{$(f).removeClass("error")}}};this.addError=function(a,b){var f;if(e===null){e=a}if(b!==null||b!==""){f=$("#"+$(a).data("errmessage"));if(f.length===1){if(f.text()===""){f.hide().text(b).slideDown(c.animationTime)}}else{f=d.getErrorElement(a);if(f.length===0){$(c.errorMessage.replace("[[text]]",b)).hide().appendTo(a.parent(":first")).slideDown(c.animationTime)}else{f.text(b)}}}a.addClass("error");g=true;return true};this.removeError=function(a){var b;a.removeClass("error");b=$("#"+$(a).data("errmessage"));if(b.length===1){b.slideUp(c.animationTime)}else{d.getErrorElement(a).slideUp(c.animationTime).queue(function(){$(this).remove()})}};this.getErrorElement=function(a){return a.parent(":first").children($(c.errorMessage)[0].nodeName+"."+$(c.errorMessage).attr("class"))}}(function(a){"use strict";jQuery.fn.SimpleFormChecker=function(b){var c,d,e,f,g;for(c=0,d=this.length;c<d;c+=1){e=a(this[c]);f=b||{};g=(new Sfc).construct(e,f)}}})(jQuery)